version: '3.0'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
intents:
- intent_greet
- intent_explain_ipm
- intent_deny
- intent_goodbye
- intent_affirm
- intent_bot_challenge
- request_plant_problem
- request_plant_picture
- request_generic_question
- request_expert
entities:
- plant_damage
- plant_name
- plant_part
- plant_type
slots:
  shown_greeting:
    type: bool
    influence_conversation: false
    mappings:
    - type: custom
  shown_privacy_policy:
    type: bool
    influence_conversation: false
    mappings:
    - type: custom
  shown_explain_ipm:
    type: bool
    influence_conversation: false
    mappings:
    - type: custom
  plant_type:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: plant_type
      conditions:
      - active_loop: plant_problem_form
        requested_slot: plant_type
  plant_name:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: plant_name
      conditions:
      - active_loop: plant_problem_form
        requested_slot: plant_name
  plant_part:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: plant_part
      conditions:
      - active_loop: plant_problem_form
        requested_slot: plant_part
  plant_damages:
    type: list
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: plant_damage
      conditions:
      - active_loop: plant_problem_form
        requested_slot: plant_damages
responses:
  utter_default:
  - text: I'm sorry, I am still learning thanks to your inputs.
  utter_did_that_help:
  - text: Did that help you?
  utter_happy:
  - text: Great, carry on!
  utter_goodbye:
  - text: Bye
  utter_iamabot:
  - text: I am a bot, powered by Rasa.
  utter_greet:
  - text: Hi, I am AskExtension Assistant!
  utter_privacy_policy:
  - text: By chatting with me, you agree to our [privacy policy](https://ucanr.edu/?privacyStatement/).
  utter_explain_ipm:
  - text: |-
      IPM is an ecosystem-based strategy that focuses on long-term prevention of pests or their damage through a combination of techniques such as biological control, habitat manipulation, modification of cultural practices, and use of resistant varieties.
      Pesticides are used only after monitoring indicates they are needed according to established guidelines, and treatments are made with the goal of removing only the target organism.
      Pest control materials are selected and applied in a manner that minimizes risks to human health, beneficial and nontarget organisms, and the environment.
      You can find more details [here](https://www2.ipm.ucanr.edu/What-is-IPM/).
  utter_select_options:
  - text: How can I help you?
    buttons:
    - payload: /request_plant_problem
      title: I have problem with my plant.
    - payload: /request_plant_picture
      title: I have a picture and I would like to get help on that.
    - payload: /request_generic
      title: I have generic request.
    - payload: /request_expert
      title: Connect me to askextension expert.
  utter_submit_plant_problem_form:
  - text: |-
      I am going to run a plant problem search using the following parameters:
       - plant_type: {plant_type}
       - plant_name: {plant_name}
       - plant_part: {plant_part}
       - plant_damages: {plant_damages}
actions:
- action_explain_ipm
- action_greet
- action_ask_plant_type
- action_ask_plant_name
- action_ask_plant_part
- action_ask_plant_damages
- validate_plant_problem_form
- action_submit_plant_problem_form
forms:
  plant_problem_form:
    required_slots:
    - plant_type
    - plant_name
    - plant_part
    - plant_damages
